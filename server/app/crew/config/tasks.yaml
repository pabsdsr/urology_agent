# Single comprehensive task that handles everything for maximum speed and efficiency
clinical_assistant_task:
  description: >
    For patient {id} and the healthcare provider's {query}, provide a complete clinical response:
    
    STEP 1 - QUERY OPTIMIZATION:
    1. Analyze the clinical query and automatically expand medical abbreviations and synonyms
    2. Consider temporal context and clinical relationships
    
    STEP 2 - DATA RETRIEVAL:
    3. Use the QdrantVectorSearchTool with optimized search parameters:
        - query: Enhanced version of {query} with medical terms, synonyms, and context
        - filter_by: "patient_id"
        - filter_value: "{id}"
    4. Evaluate retrieved clinical information for medical relevance and accuracy
    
    STEP 3 - CLINICAL SYNTHESIS:
    5. Prioritize information by clinical significance (critical → relevant → supporting)
    6. Filter out clinically irrelevant information
    7. Organize findings in a format optimized for healthcare provider workflows
    8. Present the final response with proper clinical formatting
  expected_output: >
    A natural, conversational response that directly answers the healthcare provider's query. 
    
    The response should:
    - Directly address the specific question asked
    - Include relevant clinical findings with dates and values when available
    - Mention any critical or urgent findings naturally within the response
    - Provide clinical context and relevant background information as needed
    - State clearly if no relevant information is found: "I couldn't find any relevant clinical information for this patient regarding [query]"
    
    Use clear medical terminology appropriate for healthcare providers. Never fabricate clinical data. 
    Provide a helpful, direct answer without rigid formatting or sections.
  agent: clinical_assistant_agent
